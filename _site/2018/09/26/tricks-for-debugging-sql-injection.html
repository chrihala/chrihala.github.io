<!DOCTYPE HTML><html><head><title>Hackallthethings.xyz</title><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" /><link rel="stylesheet" href="/assets/css/main.css" /><link href="/assets/css/syntax.css" rel="stylesheet" /></head><body class="is-preload"><div id="header"><div class="top"><div id="logo"> <span class="image avatar48"><img src="/assets/images/avatar.jpg" alt="" /></span><h1 id="title">Hland</h1><p></p></div><nav id="nav"><ul><li><a href="/" id="top-link"><span class="icon fa-user">whoami</span></a></li><li><a href="/library"><span class="icon fa-book">Library</span></a></li><li><a href="/weblog"><span class="icon fa-rss">Weblog</span></a></li></ul></nav></div><div class="bottom"><ul class="icons"><li><a href="https://twitter.com/vladthegad" target="_blank" _rel="noreferrer noopen" class="icon fa-twitter"><span class="label">Twitter</span></a></li><li><a href="https://lmgtfy.com/?q=Privacy+is+not+dead" target="_blank" _rel="noreferrer noopen" class="icon fa-facebook"><span class="label">Facebook</span></a></li><li><a href="https://hackerone.com/hland" target="_blank" _rel="noreferrer noopen" class="icon"><span class="label">HackerOne</span></a></li></ul></div></div><section id="weblog" class="two"><div class="container"><header><h2>Tricks for debugging SQL Injection Exploitation</h2><p>Writtten by Hland on 26th September 2018</p></header><section class="post"><p>Here are a few tricks that are useful for debugging SQL injection bugs on OS X when you have the codebase, can run the application locally and wanna see the actually queries being run in the database. My use-case for this is automating exploitation of relatively complex SQL injections with SQLMap to prove data exfiltration capabilities through a vulnerability.</p><p>This is targeted at MySQL running on OS X and installed via HomeBrew. I like to use <a href="https://www.sequelpro.com/">Sequel Pro</a> as it’s nice to have some GUI support and don’t have to lookup how to setup permissions and such every time you wanna setup a database.</p><p>First, to install MySQL via HomeBrew:</p><figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">brew</span> <span class="n">install</span> <span class="n">mysql</span>
<span class="n">brew</span> <span class="n">services</span> <span class="n">start</span> <span class="n">mysql</span>
<span class="n">brew</span> <span class="n">services</span> <span class="n">stop</span> <span class="n">mysql</span></code></pre></figure><p>Enable query logging. Run this from a MySQL prompt:</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set GLOBAL general_log = 'ON';
SHOW VARIABLES LIKE '%general_log%'`
</code></pre></div></div><p>Watch the SQL queries hit your database while you run SQLMap or some other gatling-gun style tool against your local application.</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tail -f /usr/local/var/mysql/&lt;your-hostname&gt;.log
</code></pre></div></div></section></div></section><script src="/assets/js/jquery.min.js"></script> <script src="/assets/js/jquery.scrolly.min.js"></script> <script src="/assets/js/jquery.scrollex.min.js"></script> <script src="/assets/js/browser.min.js"></script> <script src="/assets/js/breakpoints.min.js"></script> <script src="/assets/js/util.js"></script> <script src="/assets/js/main.js"></script></body></html>
